
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4.8.2. Common Structs &#8212; Caterpillar 2.7.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=c1cc8b61" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=dfec817d"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'library/fields/common';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="4.8.3. Compression Structs" href="compression.html" />
    <link rel="prev" title="4.8.1. Field Model" href="field_model.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.7.0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Caterpillar 2.7.0</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../installing/index.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorial/index.html">
    Tutorial
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Library
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../development/index.html">
    Development
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/MatrixEditor/caterpillar" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../installing/index.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorial/index.html">
    Tutorial
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Library
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../development/index.html">
    Development
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/MatrixEditor/caterpillar" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../byteorder.html">4.1. Byteorder and Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../options.html">4.2. Options / Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../context.html">4.3. Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exceptions.html">4.4. Exceptions</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../model.html">4.5. Struct Model</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../model/sequence.html">4.5.1. Sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model/struct.html">4.5.2. Struct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model/bitfield.html">4.5.3. Bitfield</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model/template.html">4.5.4. Templates</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../registry.html">4.6. Annotation Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shared.html">4.7. Shared Concepts</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">4.8. Fields</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="field_model.html">4.8.1. Field Model</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">4.8.2. Common Structs</a></li>
<li class="toctree-l2"><a class="reference internal" href="compression.html">4.8.3. Compression Structs</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.html">4.8.4. Cryptographic Structs</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link"><span class="section-number">4. </span>Library</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link"><span class="section-number">4.8. </span>Fields</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis"><span class="section-number">4.8.2. </span>Common Structs</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="common-structs">
<span id="fields-common"></span><h1><span class="section-number">4.8.2. </span>Common Structs<a class="headerlink" href="#common-structs" title="Link to this heading">#</a></h1>
<section id="numeric-structs">
<h2><span class="section-number">4.8.2.1. </span>Numeric Structs<a class="headerlink" href="#numeric-structs" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.PyStructFormattedField">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">PyStructFormattedField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#PyStructFormattedField"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.PyStructFormattedField" title="Link to this definition">#</a></dt>
<dd><p>A field class representing a binary format using format characters (e.g., ‘i’, ‘x’, etc.).</p>
<p>This class allows you to define fields for binary struct formats using format characters,
which are often used in Python’s <cite>struct</cite> module. Each field is associated with a format character
(like ‘x’ for padding or ‘i’ for a signed integer), and it determines how data is packed and unpacked.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="n">PyStructFormattedField</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
<span class="go">&quot;&lt;int32&gt;&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ch</strong> – The format character (e.g., ‘i’, ‘x’, ‘f’) that defines how the field is packed and unpacked.</p></li>
<li><p><strong>type</strong> – The Python type that corresponds to the format character.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.4.0: </span><code class="code docutils literal notranslate"><span class="pre">FormatField</span></code> renamed to <code class="code docutils literal notranslate"><span class="pre">PyStructFormattedField</span></code></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.PyStructFormattedField.text">
<span class="sig-name descname"><span class="pre">text</span></span><a class="headerlink" href="#caterpillar.fields.PyStructFormattedField.text" title="Link to this definition">#</a></dt>
<dd><p>The format char (e.g. ‘x’, ‘i’, …)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.PyStructFormattedField.ty">
<span class="sig-name descname"><span class="pre">ty</span></span><a class="headerlink" href="#caterpillar.fields.PyStructFormattedField.ty" title="Link to this definition">#</a></dt>
<dd><p>The returned Python type</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.PyStructFormattedField.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#PyStructFormattedField.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.PyStructFormattedField.pack_single" title="Link to this definition">#</a></dt>
<dd><p>Pack a single value into the stream using the defined format character.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The value to pack (can be of the type defined by the format character).</p></li>
<li><p><strong>context</strong> – The context that provides the stream and field-specific information.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.PyStructFormattedField.pack_seq">
<span class="sig-name descname"><span class="pre">pack_seq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#PyStructFormattedField.pack_seq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.PyStructFormattedField.pack_seq" title="Link to this definition">#</a></dt>
<dd><p>Pack a sequence of values into the stream.</p>
<p>If the context specifies a fixed amount, it will pack the sequence accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seq</strong> – The sequence of values to pack.</p></li>
<li><p><strong>context</strong> – The context providing packing information.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.PyStructFormattedField.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#PyStructFormattedField.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.PyStructFormattedField.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single value from the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The context that provides the stream and field-specific information.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unpacked value, converted to the field’s corresponding Python type.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.PyStructFormattedField.unpack_seq">
<span class="sig-name descname"><span class="pre">unpack_seq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#PyStructFormattedField.unpack_seq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.PyStructFormattedField.unpack_seq" title="Link to this definition">#</a></dt>
<dd><p>Unpack a sequence of values from the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The context that provides the stream and field-specific information.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of unpacked values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.PyStructFormattedField.is_padding">
<span class="sig-name descname"><span class="pre">is_padding</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#PyStructFormattedField.is_padding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.PyStructFormattedField.is_padding" title="Link to this definition">#</a></dt>
<dd><p>Check if the field represents padding.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the field is padding (i.e., ‘x’ format character), False otherwise.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.uint8">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">uint8</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int8&gt;</span></em><a class="headerlink" href="#caterpillar.fields.uint8" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.int8">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">int8</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int8&gt;</span></em><a class="headerlink" href="#caterpillar.fields.int8" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.uint16">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">uint16</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int16&gt;</span></em><a class="headerlink" href="#caterpillar.fields.uint16" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.int16">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">int16</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int16&gt;</span></em><a class="headerlink" href="#caterpillar.fields.int16" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.uint32">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">uint32</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int32&gt;</span></em><a class="headerlink" href="#caterpillar.fields.uint32" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.int32">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">int32</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int32&gt;</span></em><a class="headerlink" href="#caterpillar.fields.int32" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.uint64">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">uint64</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int64&gt;</span></em><a class="headerlink" href="#caterpillar.fields.uint64" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.int64">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">int64</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int64&gt;</span></em><a class="headerlink" href="#caterpillar.fields.int64" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.size_t">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">size_t</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int64&gt;</span></em><a class="headerlink" href="#caterpillar.fields.size_t" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.ssize_t">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">ssize_t</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int64&gt;</span></em><a class="headerlink" href="#caterpillar.fields.ssize_t" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.float16">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">float16</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;float16&gt;</span></em><a class="headerlink" href="#caterpillar.fields.float16" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.float32">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">float32</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;float32&gt;</span></em><a class="headerlink" href="#caterpillar.fields.float32" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.float64">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">float64</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;float64&gt;</span></em><a class="headerlink" href="#caterpillar.fields.float64" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.void_ptr">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">void_ptr</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;int64&gt;</span></em><a class="headerlink" href="#caterpillar.fields.void_ptr" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.char">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">char</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;str8&gt;</span></em><a class="headerlink" href="#caterpillar.fields.char" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.boolean">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">boolean</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;bool8&gt;</span></em><a class="headerlink" href="#caterpillar.fields.boolean" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.padding">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">padding</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;padding&gt;</span></em><a class="headerlink" href="#caterpillar.fields.padding" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.Int">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Int"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Int" title="Link to this definition">#</a></dt>
<dd><p>Generic Integer</p>
<p>This class handles packing and unpacking integer values with a specified bit size, either
signed or unsigned. The size of the integer is defined in bits, and the class ensures the
appropriate byte representation is used for packing and unpacking.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bits</strong> – The bit width of the integer (e.g., 8, 16, 32, 64).</p></li>
<li><p><strong>signed</strong> – Whether the integer is signed (default is True).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Int.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Int.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Int.pack_single" title="Link to this definition">#</a></dt>
<dd><p>Pack a single integer value into the stream.</p>
<p>This method converts the integer value into a byte representation using the specified
byte order. The byte order is determined from the context’s field order
(either little-endian or big-endian).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The integer value to pack.</p></li>
<li><p><strong>context</strong> – The current context, which provides the byte order (little-endian or big-endian).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the integer is too large or small for the given bit width.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Int.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Int.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Int.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single integer value from the stream.</p>
<p>This method reads a byte sequence from the stream, interprets it as an integer using the
specified byte order and signedness, and returns the integer value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context, which provides the byte order (little-endian or big-endian).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unpacked integer value.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the data cannot be unpacked as an integer of the specified size.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.UInt">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">UInt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#UInt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.UInt" title="Link to this definition">#</a></dt>
<dd><p>Generic unsigned integer.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.vint">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">vint</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;VarInt&gt;</span></em><a class="headerlink" href="#caterpillar.fields.vint" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.VarInt">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">VarInt</span></span><a class="reference internal" href="../../_modules/caterpillar/fields/varint.html#VarInt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.VarInt" title="Link to this definition">#</a></dt>
<dd><p>Variable-length integer struct.</p>
<p>This class implements variable-length unsigned integer for big-endian and
little-endian encoding. The default behaviour uses big-endian encoding. It
has an additional flag that can be configured globally or once per field.</p>
<p><code class="docutils literal notranslate"><span class="pre">VARINT_LSB</span></code> specifies that the last significant byte will use a <code class="docutils literal notranslate"><span class="pre">1</span></code> to
identify the end of the varint. Otherwise, zero will be used (which is the
default setting). The following configurations are therefore possible:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="n">be</span> <span class="o">+</span> <span class="n">vint</span><span class="p">;</span> <span class="nb">print</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
<span class="go">b&#39;\x88\x00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="n">be</span> <span class="o">+</span> <span class="n">vint</span> <span class="o">|</span> <span class="n">VARINT_LSB</span><span class="p">;</span> <span class="nb">print</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
<span class="go">b&#39;\x08\x80&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="n">le</span> <span class="o">+</span> <span class="n">vint</span><span class="p">;</span> <span class="nb">print</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
<span class="go">b&#39;\x80\x08&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="n">le</span> <span class="o">+</span> <span class="n">vint</span> <span class="o">|</span> <span class="n">VARINT_LSB</span><span class="p">;</span> <span class="nb">print</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
<span class="go">b&#39;\x00\x88&#39;</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.VarInt.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/varint.html#VarInt.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.VarInt.pack_single" title="Link to this definition">#</a></dt>
<dd><p>Pack a single value into the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The value to pack.</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.VarInt.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/varint.html#VarInt.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.VarInt.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single value from the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream</strong> – The input stream.</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unpacked value.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="bytes-strings">
<h2><span class="section-number">4.8.2.2. </span>Bytes, Strings<a class="headerlink" href="#bytes-strings" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.Memory">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Memory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Memory" title="Link to this definition">#</a></dt>
<dd><p>A class representing a memory field that handles packing and unpacking byte-like objects
of a specified length.</p>
<p>The <cite>Memory</cite> class is used to manage fields that contain raw byte data. It allows you to
pack a byte object (either <cite>bytes</cite> or <cite>memoryview</cite>) into a stream and unpack byte data
from a stream into a <cite>memoryview</cite>. The length of the memory field can be fixed or dynamically
determined based on the context. If the length is unspecified, the entire available data in
the stream is read.</p>
<p>This class can handle the following scenarios for the <cite>length</cite> argument:
- <strong>Fixed length</strong>: A specific number of bytes (e.g., <cite>10</cite>).
- <strong>Dynamic length</strong>: A callable that returns the length based on the current context (e.g., <cite>lambda ctx: ctx[“length”]</cite>).
- <strong>Greedy length</strong>: Using <cite>Ellipsis</cite> (<cite>…</cite>), meaning the entire stream is read regardless of the size.</p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Memory with a fixed length of 10 bytes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">memory</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">memory_dynamic</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="k">lambda</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">length</span><span class="p">)</span> <span class="c1"># dynamic length based on context</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">memory_greedy</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;1234567890&quot;</span><span class="p">,</span> <span class="n">memory</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">b&quot;1234567890&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;1234567890&quot;</span><span class="p">,</span> <span class="n">memory_dynamic</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">b&quot;1234567890&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;1234567890&quot;</span><span class="p">,</span> <span class="n">memory_greedy</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">b&quot;1234567890&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>length</strong> – The length of the memory to pack or unpack. It can be:
- An integer specifying the number of bytes to handle.
- A callable that dynamically returns the number of bytes based on the context.
- Ellipsis (<cite>…</cite>), indicating the length is unspecified and the entire stream should be read.</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.4.0: </span>Removed <code class="code docutils literal notranslate"><span class="pre">encoding</span></code> argument</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Memory.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Memory.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Memory.pack_single" title="Link to this definition">#</a></dt>
<dd><p>Pack a single byte object (memoryview or bytes) into the stream.</p>
<p>This method writes a byte object (<cite>memoryview</cite> or <cite>bytes</cite>) into the stream,
ensuring that the size of the object matches the expected length defined by
the <cite>Memory</cite> field. If the expected size is fixed (not <cite>Ellipsis</cite>), a
validation is performed to ensure that the length of the <cite>obj</cite> matches
the expected size.</p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">memory</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;1234567890&quot;</span><span class="p">,</span> <span class="n">memory</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># Packs exactly 10 bytes into the stream</span>
<span class="go">b&quot;1234567890&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">memory</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValidationError</span>: <span class="n">Memory field expected 10 bytes, but got 1 bytes instead</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The byte object to be packed. This can be either a <cite>memoryview</cite> or a <cite>bytes</cite> object.</p></li>
<li><p><strong>context</strong> – The current context, which provides access to the stream and any additional metadata needed
for packing.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../exceptions.html#caterpillar.exception.ValidationError" title="caterpillar.exception.ValidationError"><strong>ValidationError</strong></a> – If the length of the <cite>obj</cite> does not match the expected size.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Memory.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Memory.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Memory.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single byte object (memoryview) from the stream.</p>
<p>This method reads bytes from the stream into a <cite>memoryview</cite>. The size
of the object to be unpacked is determined by the <cite>Memory</cite> field’s length.
If the length is fixed (not <cite>Ellipsis</cite>), it reads exactly that number of
bytes. If the length is unspecified (i.e., <cite>Ellipsis</cite>), it reads until the
end of the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context, which provides access to the stream and
any additional metadata needed for unpacking.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <cite>memoryview</cite> object representing the unpacked byte data.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.Bytes">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Bytes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Bytes" title="Link to this definition">#</a></dt>
<dd><p>Byte sequences.</p>
<p>Same class as <a class="reference internal" href="#caterpillar.fields.Memory" title="caterpillar.fields.Memory"><code class="xref py py-class docutils literal notranslate"><span class="pre">Memory</span></code></a> but with a type of <cite>bytes</cite> instead of <cite>memoryview</cite>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Bytes.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Bytes.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Bytes.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single byte sequence (bytes) from the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context, which provides access to the stream and
other necessary metadata for unpacking.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <cite>bytes</cite> object representing the unpacked data from the stream.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.String">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">String</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#String"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.String" title="Link to this definition">#</a></dt>
<dd><p>String sequences.</p>
<p>Same class as <a class="reference internal" href="#caterpillar.fields.Memory" title="caterpillar.fields.Memory"><code class="xref py py-class docutils literal notranslate"><span class="pre">Memory</span></code></a> but with a type of <cite>str</cite> instead of <cite>memoryview</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>length</strong> – The length of the string to pack or unpack. It can be:
- An integer specifying the number of bytes (e.g., <cite>10</cite>).
- A callable that dynamically returns the number of bytes based on the context (e.g., <cite>lambda ctx: ctx[“length”]</cite>).
- Ellipsis (<cite>…</cite>), meaning the entire available stream should be read, regardless of size.</p></li>
<li><p><strong>encoding</strong> – The encoding to use for converting bytes to a string during unpacking. If not specified, defaults to <cite>None</cite>.
If specified, the string will be decoded using this encoding (e.g., <cite>utf-8</cite>).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.String.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#String.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.String.pack_single" title="Link to this definition">#</a></dt>
<dd><p>Packs a single string into the stream.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.String.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#String.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.String.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single string from the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <cite>str</cite> representing the unpacked string, decoded from bytes using the specified encoding.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.Prefixed">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Prefixed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Prefixed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Prefixed" title="Link to this definition">#</a></dt>
<dd><p>A specialized field for handling data with a prefix (typically indicating length or size).</p>
<p>This class is used when you want to prefix a data structure with a size or other identifying
information. The prefix is typically packed first, followed by the actual data. The field
allows for handling both prefixed data with a structure and simple byte sequences, depending
on the presence of the <cite>struct</cite> argument. However, the returned prefix value must be
an integer.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prefixed</span> <span class="o">=</span> <span class="n">Prefixed</span><span class="p">(</span><span class="n">uint32</span><span class="p">,</span> <span class="n">Bytes</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;abcd&quot;</span><span class="p">,</span> <span class="n">prefixed</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">b&quot;\x00\x00\x00\x04abcd&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="n">prefixed</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00\x00\x00\x04</span><span class="s2">abcd&quot;</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">b&quot;abcd&quot;</span>
</pre></div>
</div>
<p>The prefix is packed and unpacked independently and is used to determine the size of the
following data.</p>
<p><strong>Please note that this class will have a huge impact on the resulting packing and
unpacking time and will increase it significantly.</strong></p>
<p>Starting from v2.4.0, this class uses the <cite>struct</cite> as its second parameter, moving the
‘encoding’ parameter to the third parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix</strong> – The struct that defines the prefix (e.g., a length field).</p></li>
<li><p><strong>struct</strong> – The struct that defines the data to follow the prefix (e.g., <cite>Bytes</cite> or another field).</p></li>
<li><p><strong>encoding</strong> – The encoding to use for the prefix.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.4.0: </span>Added support for arbitrary structs. <strong>Warning: the second parameter is now a struct instead of the encoding string.</strong></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Prefixed.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Prefixed.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Prefixed.pack_single" title="Link to this definition">#</a></dt>
<dd><p>Pack a single object into the stream, with the prefix indicating the size.</p>
<p>This method first packs the length of the data (the prefix), and then writes the actual data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The object to pack (should be a byte sequence).</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Prefixed.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Prefixed.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Prefixed.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single object from the stream, using the prefix to determine the size.</p>
<p>This method first unpacks the prefix (which indicates the size), then reads the data
from the stream based on that size. If a <cite>struct</cite> is provided, the data is then passed
through the specified structure for further unpacking.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unpacked object, which is either raw bytes or the data structure.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.CString">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">CString</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#CString"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.CString" title="Link to this definition">#</a></dt>
<dd><p>C-style strings (null-terminated or padded).</p>
<p>This class is designed for handling strings that are padded to a
fixed length, typically with zero-padding or any custom padding
character. It is useful for encoding and decoding data that follows
the C-style string conventions, where strings are often represented
by a fixed length, and padding (e.g., null bytes) is used to fill
the remaining space.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cstring</span> <span class="o">=</span> <span class="n">CString</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="c1"># encoding is optional</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack</span><span class="p">(</span><span class="n">cstring</span><span class="p">,</span> <span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
<span class="go">b&quot;Hello, World\x00&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="n">cstring</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;Hello, World</span><span class="se">\x00</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">&#39;Hello, World!&#39;</span>
</pre></div>
</div>
<p>This class also supports direct getitem access to create a list:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cstrings</span> <span class="o">=</span> <span class="n">CString</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="c1"># array of ten strings (variable size)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>length</strong> – The fixed length of the C-string or a callable that determines
the length based on the context. If <cite>None</cite> or <cite>Ellipsis</cite>, the
string will be unpacked until the padding character is found.</p></li>
<li><p><strong>encoding</strong> – The encoding to use for converting the byte data to a string.
Defaults to <cite>utf-8</cite>. If <cite>None</cite>, the default encoding is used.</p></li>
<li><p><strong>pad</strong> – The padding character to use (usually <cite>0</cite> for null padding). If a
string is provided, it must be a single character. If not specified,
defaults to <cite>0</cite> (null byte).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.CString.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#CString.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.CString.pack_single" title="Link to this definition">#</a></dt>
<dd><p>Pack a single string into the stream with padding.</p>
<p>This method encodes the string into bytes and pads it to the
fixed length, if applicable. If the length is dynamic or
unspecified, padding is added until the total length is achieved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The string to pack into the stream.</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../exceptions.html#caterpillar.exception.ValidationError" title="caterpillar.exception.ValidationError"><strong>ValidationError</strong></a> – If the string is too long for the fixed length.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.CString.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#CString.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.CString.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single C-style string from the stream.</p>
<p>This method reads bytes from the stream until a padding
character is found. If the length is fixed, it will unpack
exactly that number of bytes. If length is unspecified, it
unpacks until the padding character is encountered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context, which provides access to the
stream and other necessary metadata.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unpacked string, stripped of padding, decoded with
the specified encoding.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.ConstString">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">ConstString</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#ConstString"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.ConstString" title="Link to this definition">#</a></dt>
<dd><p>A specialized constant field for handling fixed string values.</p>
<p>This class is used to define a field that always holds a constant
string value. The value is validated during both encoding and
decoding to ensure that the expected constant string is preserved.
The string can optionally be encoded in a specific encoding.</p>
<p>Additionally, this class provides a type converter that can be used
to convert a string annotation to a <cite>ConstString</cite> field.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@struct</span>
<span class="gp">... </span><span class="k">class</span><span class="w"> </span><span class="nc">MyStruct</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;const str&quot;</span> <span class="c1"># &lt;-- will be converted to ConstString</span>
</pre></div>
</div>
<p>Note that the type declaration above won’t work if you enable
annotation evaluation.</p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define a constant string value to enforce during encoding/decoding</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">const_str</span> <span class="o">=</span> <span class="n">ConstString</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">const_str</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">b&quot;Hello, World!&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="n">const_str</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&quot;Hello, World!&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The constant string value to be encoded/decoded.</p></li>
<li><p><strong>encoding</strong> – The encoding to use for the string (default is UTF-8).
If <cite>None</cite>, the default system encoding is used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.ConstBytes">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">ConstBytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#ConstBytes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.ConstBytes" title="Link to this definition">#</a></dt>
<dd><p>A constant field for handling fixed bytes values.</p>
<p>This class is used to define a field that always holds a constant
bytes value. The value is validated during both encoding and
decoding to ensure that the expected constant byte sequence is
preserved.</p>
<p>This class provides a type converter that can be used to convert
a bytes annotation to a <cite>ConstBytes</cite> field.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@struct</span>
<span class="gp">... </span><span class="k">class</span><span class="w"> </span><span class="nc">MyStruct</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">value</span><span class="p">:</span> <span class="sa">b</span><span class="s2">&quot;const bytes&quot;</span> <span class="c1"># &lt;-- will be converted to ConstBytes</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> – The constant bytes value to be encoded/decoded.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="special-structs">
<h2><span class="section-number">4.8.2.3. </span>Special Structs<a class="headerlink" href="#special-structs" title="Link to this heading">#</a></h2>
<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.Pass">
<span class="sig-prename descclassname"><span class="pre">fields.</span></span><span class="sig-name descname"><span class="pre">Pass</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;Pass&gt;</span></em><a class="headerlink" href="#caterpillar.fields.Pass" title="Link to this definition">#</a></dt>
<dd><p>See source code for details</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.Aligned">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Aligned</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alignment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filler</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Aligned"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Aligned" title="Link to this definition">#</a></dt>
<dd><p>Alignment of a struct (before or after)</p>
<p>This class ensures that the associated <cite>struct</cite> is properly aligned according to
the specified alignment. It allows for padding before or after the field, ensuring
that the field starts or ends at a memory address that is a multiple of the alignment.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@struct</span>
<span class="gp">... </span><span class="k">class</span><span class="w"> </span><span class="nc">Format</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">a</span><span class="p">:</span> <span class="n">Aligned</span><span class="p">(</span><span class="n">int16</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">b</span><span class="p">:</span> <span class="n">uint8</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="n">Format</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00\x01\xFF\xFF\x01</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Expected 2 bytes of padding (value=0), got 0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="n">Format</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00\x01\x00\x00\x01</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Format(a=256, b=1)</span>
</pre></div>
</div>
<p>This example shows a <cite>Format</cite> structure where:
- <cite>a</cite> is an aligned integer (with 4-byte alignment) and padding is applied after the field.
- <cite>b</cite> is an unsigned byte (<cite>uint8</cite>), which follows <cite>a</cite> after the padding.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struct</strong> – The structure that is to be aligned.</p></li>
<li><p><strong>alignment</strong> – The alignment value in bytes, which must be a power of 2.
This can be an integer or a context lambda for dynamic alignment.</p></li>
<li><p><strong>after</strong> – If <cite>True</cite>, padding is applied after the structure (align after).</p></li>
<li><p><strong>before</strong> – If <cite>True</cite>, padding is applied before the structure (align before).</p></li>
<li><p><strong>filler</strong> – The byte value to use for padding. It can be an integer or a string
(default is zero-padding). If no filler is provided, <cite>b”&quot;</cite> will
be used as the padding byte.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If neither <cite>before</cite> nor <cite>after</cite> is specified, if the filler is not a
single byte, or if the padding does not match the expected value.</p></li>
<li><p><a class="reference internal" href="../exceptions.html#caterpillar.exception.DynamicSizeError" title="caterpillar.exception.DynamicSizeError"><strong>DynamicSizeError</strong></a> – If dynamic alignment is used and the size cannot be determined.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.4.0.</span></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Aligned.unpack_alignment">
<span class="sig-name descname"><span class="pre">unpack_alignment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Aligned.unpack_alignment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Aligned.unpack_alignment" title="Link to this definition">#</a></dt>
<dd><p>Unpack padding for the alignment, verifying that the correct amount of padding is present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the padding does not match the expected value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Aligned.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Aligned.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Aligned.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single aligned field from the stream.</p>
<p>This method ensures that padding is applied before or after the field as needed
based on the <cite>before</cite> and <cite>after</cite> parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unpacked structure, properly aligned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Aligned.pack_alignment">
<span class="sig-name descname"><span class="pre">pack_alignment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Aligned.pack_alignment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Aligned.pack_alignment" title="Link to this definition">#</a></dt>
<dd><p>Apply padding for the alignment before or after the structure, depending on
the <cite>before</cite> and <cite>after</cite> settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Aligned.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Aligned.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Aligned.pack_single" title="Link to this definition">#</a></dt>
<dd><p>Pack a single aligned field into the stream, applying padding if necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The structure to pack.</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="caterpillar.fields.align">
<span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">align</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alignment</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#align"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.align" title="Link to this definition">#</a></dt>
<dd><p>Create a context lambda to calculate the alignment padding required at the current stream position.</p>
<p>This function generates a lambda that can be used to compute the amount of padding required
to ensure that the next structure in the stream is aligned to the specified alignment.</p>
<p>The alignment value can either be a fixed integer (representing the alignment in bytes)
or a context lambda that computes the alignment dynamically based on the current context.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@struct</span>
<span class="gp">... </span><span class="k">class</span><span class="w"> </span><span class="nc">Format</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">a</span><span class="p">:</span> <span class="n">uint8</span>
<span class="gp">... </span>    <span class="n">b</span><span class="p">:</span> <span class="n">padding</span><span class="p">[</span><span class="n">align</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="n">Format</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x01\x00\x00\x00</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Format(a=1, b=None)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>alignment</strong> – The alignment value in bytes, which must be a power of 2.
This can be either an integer or a context lambda.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A context lambda function that returns the number of bytes to align the next structure.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.Computed">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Computed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Computed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Computed" title="Link to this definition">#</a></dt>
<dd><p>A specialized field for representing computed or dynamically calculated values.</p>
<p>This class is used to define a field that holds a computed value. The value
can either be a constant or a function (lambda) that computes the value
dynamically based on the context during packing or unpacking.</p>
<p>The computed value is not directly stored; instead, it is evaluated using
the provided lambda function or constant value during encoding and decoding.</p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define a computed field with a constant value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">computed</span> <span class="o">=</span> <span class="n">Computed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="n">computed</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00\x01</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">computed</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">b&quot;&quot; # won&#39;t affect the stream</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> – A constant value or a lambda function that computes the value
based on the context.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Computed.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Computed.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Computed.pack_single" title="Link to this definition">#</a></dt>
<dd><p>No packing is needed for computed fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The object to pack.</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Computed.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Computed.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Computed.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>No unpacking is needed for computed fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.Transformer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Transformer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Transformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Transformer" title="Link to this definition">#</a></dt>
<dd><p>A class that acts as a transformer for encoding and decoding data using a wrapped _StructLike object.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.5.0: </span>Removed <code class="docutils literal notranslate"><span class="pre">__fmt__</span></code> method</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Transformer.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Transformer.encode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Transformer.encode" title="Link to this definition">#</a></dt>
<dd><p>Encode data using the wrapped _StructLike object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The original data to be encoded.</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The encoded data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Transformer.decode">
<span class="sig-name descname"><span class="pre">decode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parsed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Transformer.decode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Transformer.decode" title="Link to this definition">#</a></dt>
<dd><p>Decode data using the wrapped _StructLike object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parsed</strong> – The parsed data to be decoded.</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The decoded data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Transformer.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Transformer.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Transformer.pack_single" title="Link to this definition">#</a></dt>
<dd><p>Pack a single value into the stream using encoding.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The original data to be encoded and packed.</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Transformer.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Transformer.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Transformer.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single value from the stream and decode it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The current context.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The decoded data.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.Enum">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Enum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">struct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default=&lt;object</span> <span class="pre">object&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Enum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Enum" title="Link to this definition">#</a></dt>
<dd><p>A specialized Transformer for encoding and decoding enumeration values.</p>
<p>This class is used for transforming between enumeration values and their corresponding
encoded representations (typically integers). It provides encoding and decoding methods
to ensure that enum values are serialized and deserialized correctly. Additionally, it supports
a default value in case an invalid or unrecognized value is encountered during decoding.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span> <span class="k">as</span> <span class="n">PyEnum</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">Color</span><span class="p">(</span><span class="n">PyEnum</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">RED</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">... </span>    <span class="n">GREEN</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">... </span>    <span class="n">BLUE</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cp_enum</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="n">Color</span><span class="p">,</span> <span class="n">uint8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span> <span class="n">cp_enum</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">b&quot;\x01&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="n">cp_enum</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x01</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">as_field</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Color.RED</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – The enumeration model (an object with <cite>_member_map_</cite> and <cite>_value2member_map_</cite> attributes).</p></li>
<li><p><strong>struct</strong> – The _StructLike object to be wrapped.</p></li>
<li><p><strong>default</strong> – The default value to return if decoding encounters an unrecognized value.
Default is <cite>INVALID_DEFAULT</cite>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Enum.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Enum.encode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Enum.encode" title="Link to this definition">#</a></dt>
<dd><p>Encode an enumeration value into its corresponding encoded representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The original enumeration value to encode (e.g., <cite>Color.RED</cite>).</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The encoded value (usually an integer representing the enum).</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../exceptions.html#caterpillar.exception.ValidationError" title="caterpillar.exception.ValidationError"><strong>ValidationError</strong></a> – If the input value is not a valid enum type.</p>
</dd>
</dl>
<p>Example:
&gt;&gt;&gt; cp_enum.encode(Color.GREEN, context)
2 # (the integer value of Color.GREEN)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Enum.decode">
<span class="sig-name descname"><span class="pre">decode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parsed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Enum.decode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Enum.decode" title="Link to this definition">#</a></dt>
<dd><p>Decode an encoded value (typically an integer) back to its corresponding
enumeration value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parsed</strong> – The parsed value (usually an integer).</p></li>
<li><p><strong>context</strong> – The current context.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The corresponding enumeration value.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../exceptions.html#caterpillar.exception.InvalidValueError" title="caterpillar.exception.InvalidValueError"><strong>InvalidValueError</strong></a> – If the parsed value cannot be mapped to a valid enum.</p>
</dd>
</dl>
<p>Example:
&gt;&gt;&gt; cp_enum.decode(1, context)
Color.RED
&gt;&gt;&gt; unpack(1, cp_enum, as_field=True)
Color.RED</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.Const">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Const</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">struct</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Const"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Const" title="Link to this definition">#</a></dt>
<dd><p>A specialized Transformer that enforces a constant value during
encoding and decoding.</p>
<p>This class ensures that the encoded value is always the same
constant, and when decoding, it checks if the value matches the
expected constant. If the value doesn’t match, a <cite>ValidationError</cite>
is raised.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define a constant value to enforce during encoding/decoding</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">const_value</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">struct</span> <span class="o">=</span> <span class="n">SomeStruct</span><span class="p">()</span> <span class="c1"># must parse &#39;const_value`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="n">Const</span><span class="p">(</span><span class="n">const_value</span><span class="p">,</span> <span class="n">struct</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
<span class="go">b&quot;\x2a&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x2a</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">42</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The constant value to be enforced during encoding and decoding.</p></li>
<li><p><strong>struct</strong> – The _StructLike object to be wrapped.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Const.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Const.encode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Const.encode" title="Link to this definition">#</a></dt>
<dd><p>Encode data using the constant value. This method will always return
the constant value, regardless of the input. Therefore, <code class="code docutils literal notranslate"><span class="pre">None</span></code>
can be passed as the <cite>obj</cite> parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The original data to be encoded (ignored in this transformer).</p></li>
<li><p><strong>context</strong> – The current context (optional, not used in this implementation).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The constant value.</p>
</dd>
</dl>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">constant_value</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformer</span> <span class="o">=</span> <span class="n">Const</span><span class="p">(</span><span class="n">constant_value</span><span class="p">,</span> <span class="n">SomeStruct</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span> <span class="c1"># context is optional</span>
<span class="go">42</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Const.decode">
<span class="sig-name descname"><span class="pre">decode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parsed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Const.decode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Const.decode" title="Link to this definition">#</a></dt>
<dd><p>Decode data and ensure it matches the constant value. If the
parsed value doesn’t match, a <cite>ValidationError</cite> is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parsed</strong> – The parsed data to be decoded (must match the constant value).</p></li>
<li><p><strong>context</strong> – The current context (optional, not used in this implementation).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The constant value if parsed matches the expected constant.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../exceptions.html#caterpillar.exception.ValidationError" title="caterpillar.exception.ValidationError"><strong>ValidationError</strong></a> – If the parsed value does not match the constant value.</p>
</dd>
</dl>
<p>Example:
&gt;&gt;&gt; constant_value = 42
&gt;&gt;&gt; field = Const(constant_value, SomeStruct())
&gt;&gt;&gt; unpack(field, b”x2a”)
42
&gt;&gt;&gt; unpack(field, b”x24”)
Traceback (most recent call last):
…
ValidationError: Expected 42, got 36</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="caterpillar.fields.Lazy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Lazy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Lazy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Lazy" title="Link to this definition">#</a></dt>
<dd><p>A lazy field struct that defers the creation of the underlying struct until it is needed.</p>
<p>This class allows the definition of a field where the underlying struct is not created until
the field is actually accessed. This can help with optimization in scenarios where certain
fields may not always be used.</p>
<p>The underlying struct is defined by a callable that returns an instance of a struct.
The <cite>struct_fn</cite> function is invoked to generate the struct when the field is accessed.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@struct</span>
<span class="gp">... </span><span class="k">class</span><span class="w"> </span><span class="nc">Format</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">a</span><span class="p">:</span> <span class="n">Lazy</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">SecondFormat</span><span class="p">)</span>  <span class="c1"># Lazy instantiation of the struct</span>
<span class="gp">... </span>    <span class="n">b</span><span class="p">:</span> <span class="n">uint8</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@struct</span>
<span class="gp">... </span><span class="k">class</span><span class="w"> </span><span class="nc">SecondFormat</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">a</span><span class="p">:</span> <span class="n">uint8</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpack</span><span class="p">(</span><span class="n">Format</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x01\x02\xFF</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Format(a=SecondFormat(a=1), b=255)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>struct</strong> – A callable that returns the underlying struct, which will be lazily created
when the field is accessed.</p>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="caterpillar.fields.Lazy.struct">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">struct</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">_StructLike</span></em><a class="headerlink" href="#caterpillar.fields.Lazy.struct" title="Link to this definition">#</a></dt>
<dd><p>Get the underlying struct by invoking the callable.</p>
<p>This method ensures that the struct is only created once, and it is cached for subsequent use.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The underlying struct.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../../reference/datamodel/protocols/structlike.html#StructLike" title="_StructLike">_StructLike</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Lazy.pack_single">
<span class="sig-name descname"><span class="pre">pack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Lazy.pack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Lazy.pack_single" title="Link to this definition">#</a></dt>
<dd><p>Pack a single value using the Lazy struct by delegating to the underlying struct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The value to pack.</p></li>
<li><p><strong>context</strong> – The context for packing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="caterpillar.fields.Lazy.unpack_single">
<span class="sig-name descname"><span class="pre">unpack_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Lazy.unpack_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Lazy.unpack_single" title="Link to this definition">#</a></dt>
<dd><p>Unpack a single value using the Lazy struct by delegating to the underlying struct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – The context for unpacking.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unpacked value.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="caterpillar.fields.Uuid">
<span class="sig-prename descclassname"><span class="pre">caterpillar.fields.</span></span><span class="sig-name descname"><span class="pre">Uuid</span></span><a class="reference internal" href="../../_modules/caterpillar/fields/common.html#Uuid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#caterpillar.fields.Uuid" title="Link to this definition">#</a></dt>
<dd><p>alias of &lt;Uuid&gt;</p>
</dd></dl>

</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="field_model.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">4.8.1. </span>Field Model</p>
      </div>
    </a>
    <a class="right-next"
       href="compression.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">4.8.3. </span>Compression Structs</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#numeric-structs">4.8.2.1. Numeric Structs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.PyStructFormattedField"><code class="docutils literal notranslate"><span class="pre">PyStructFormattedField</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.PyStructFormattedField.text"><code class="docutils literal notranslate"><span class="pre">PyStructFormattedField.text</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.PyStructFormattedField.ty"><code class="docutils literal notranslate"><span class="pre">PyStructFormattedField.ty</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.PyStructFormattedField.pack_single"><code class="docutils literal notranslate"><span class="pre">PyStructFormattedField.pack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.PyStructFormattedField.pack_seq"><code class="docutils literal notranslate"><span class="pre">PyStructFormattedField.pack_seq()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.PyStructFormattedField.unpack_single"><code class="docutils literal notranslate"><span class="pre">PyStructFormattedField.unpack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.PyStructFormattedField.unpack_seq"><code class="docutils literal notranslate"><span class="pre">PyStructFormattedField.unpack_seq()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.PyStructFormattedField.is_padding"><code class="docutils literal notranslate"><span class="pre">PyStructFormattedField.is_padding()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.uint8"><code class="docutils literal notranslate"><span class="pre">fields.uint8</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.int8"><code class="docutils literal notranslate"><span class="pre">fields.int8</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.uint16"><code class="docutils literal notranslate"><span class="pre">fields.uint16</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.int16"><code class="docutils literal notranslate"><span class="pre">fields.int16</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.uint32"><code class="docutils literal notranslate"><span class="pre">fields.uint32</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.int32"><code class="docutils literal notranslate"><span class="pre">fields.int32</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.uint64"><code class="docutils literal notranslate"><span class="pre">fields.uint64</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.int64"><code class="docutils literal notranslate"><span class="pre">fields.int64</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.size_t"><code class="docutils literal notranslate"><span class="pre">fields.size_t</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.ssize_t"><code class="docutils literal notranslate"><span class="pre">fields.ssize_t</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.float16"><code class="docutils literal notranslate"><span class="pre">fields.float16</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.float32"><code class="docutils literal notranslate"><span class="pre">fields.float32</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.float64"><code class="docutils literal notranslate"><span class="pre">fields.float64</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.void_ptr"><code class="docutils literal notranslate"><span class="pre">fields.void_ptr</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.char"><code class="docutils literal notranslate"><span class="pre">fields.char</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.boolean"><code class="docutils literal notranslate"><span class="pre">fields.boolean</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.padding"><code class="docutils literal notranslate"><span class="pre">fields.padding</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Int"><code class="docutils literal notranslate"><span class="pre">Int</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Int.pack_single"><code class="docutils literal notranslate"><span class="pre">Int.pack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Int.unpack_single"><code class="docutils literal notranslate"><span class="pre">Int.unpack_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.UInt"><code class="docutils literal notranslate"><span class="pre">UInt</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.vint"><code class="docutils literal notranslate"><span class="pre">fields.vint</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.VarInt"><code class="docutils literal notranslate"><span class="pre">VarInt</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.VarInt.pack_single"><code class="docutils literal notranslate"><span class="pre">VarInt.pack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.VarInt.unpack_single"><code class="docutils literal notranslate"><span class="pre">VarInt.unpack_single()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bytes-strings">4.8.2.2. Bytes, Strings</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Memory"><code class="docutils literal notranslate"><span class="pre">Memory</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Memory.pack_single"><code class="docutils literal notranslate"><span class="pre">Memory.pack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Memory.unpack_single"><code class="docutils literal notranslate"><span class="pre">Memory.unpack_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Bytes"><code class="docutils literal notranslate"><span class="pre">Bytes</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Bytes.unpack_single"><code class="docutils literal notranslate"><span class="pre">Bytes.unpack_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.String"><code class="docutils literal notranslate"><span class="pre">String</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.String.pack_single"><code class="docutils literal notranslate"><span class="pre">String.pack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.String.unpack_single"><code class="docutils literal notranslate"><span class="pre">String.unpack_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Prefixed"><code class="docutils literal notranslate"><span class="pre">Prefixed</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Prefixed.pack_single"><code class="docutils literal notranslate"><span class="pre">Prefixed.pack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Prefixed.unpack_single"><code class="docutils literal notranslate"><span class="pre">Prefixed.unpack_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.CString"><code class="docutils literal notranslate"><span class="pre">CString</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.CString.pack_single"><code class="docutils literal notranslate"><span class="pre">CString.pack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.CString.unpack_single"><code class="docutils literal notranslate"><span class="pre">CString.unpack_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.ConstString"><code class="docutils literal notranslate"><span class="pre">ConstString</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.ConstBytes"><code class="docutils literal notranslate"><span class="pre">ConstBytes</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#special-structs">4.8.2.3. Special Structs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Pass"><code class="docutils literal notranslate"><span class="pre">fields.Pass</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Aligned"><code class="docutils literal notranslate"><span class="pre">Aligned</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Aligned.unpack_alignment"><code class="docutils literal notranslate"><span class="pre">Aligned.unpack_alignment()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Aligned.unpack_single"><code class="docutils literal notranslate"><span class="pre">Aligned.unpack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Aligned.pack_alignment"><code class="docutils literal notranslate"><span class="pre">Aligned.pack_alignment()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Aligned.pack_single"><code class="docutils literal notranslate"><span class="pre">Aligned.pack_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Computed"><code class="docutils literal notranslate"><span class="pre">Computed</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Computed.pack_single"><code class="docutils literal notranslate"><span class="pre">Computed.pack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Computed.unpack_single"><code class="docutils literal notranslate"><span class="pre">Computed.unpack_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Transformer"><code class="docutils literal notranslate"><span class="pre">Transformer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Transformer.encode"><code class="docutils literal notranslate"><span class="pre">Transformer.encode()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Transformer.decode"><code class="docutils literal notranslate"><span class="pre">Transformer.decode()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Transformer.pack_single"><code class="docutils literal notranslate"><span class="pre">Transformer.pack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Transformer.unpack_single"><code class="docutils literal notranslate"><span class="pre">Transformer.unpack_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Enum"><code class="docutils literal notranslate"><span class="pre">Enum</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Enum.encode"><code class="docutils literal notranslate"><span class="pre">Enum.encode()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Enum.decode"><code class="docutils literal notranslate"><span class="pre">Enum.decode()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Const"><code class="docutils literal notranslate"><span class="pre">Const</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Const.encode"><code class="docutils literal notranslate"><span class="pre">Const.encode()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Const.decode"><code class="docutils literal notranslate"><span class="pre">Const.decode()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Lazy"><code class="docutils literal notranslate"><span class="pre">Lazy</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Lazy.struct"><code class="docutils literal notranslate"><span class="pre">Lazy.struct</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Lazy.pack_single"><code class="docutils literal notranslate"><span class="pre">Lazy.pack_single()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Lazy.unpack_single"><code class="docutils literal notranslate"><span class="pre">Lazy.unpack_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caterpillar.fields.Uuid"><code class="docutils literal notranslate"><span class="pre">Uuid</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/library/fields/common.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, MatrixEditor.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>